<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BlushRoom Journal</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <button onclick="toggleTheme()" id="themeToggle">ðŸŒ™ Dark Mode</button>

  <h1>My Journal ðŸ“–</h1>

  <!-- Theme Selector -->
  <div class="theme-selector">
    <label>Choose Theme:</label>
    <select id="theme-picker">
      <option value="default">Default</option>
      <option value="soft-pink">Soft Pink</option>
      <option value="midnight">Midnight</option>
      <option value="sunny">Sunny</option>
    </select>
  </div>

  <!-- Streak Display -->
  <div id="streak-count" class="streak-display">ðŸ”¥ 0 day streak</div>

  <!-- Journal Entry -->
  <textarea id="journal-entry" placeholder="Write your thoughts here..."></textarea>
  <button id="save-entry">Save Entry</button>

  <script>
    // Dark mode toggle
    function toggleTheme() {
      document.body.classList.toggle("dark-mode");
      const btn = document.getElementById("themeToggle");
      if (document.body.classList.contains("dark-mode")) {
        btn.textContent = "â˜€ï¸ Light Mode";
        localStorage.setItem("darkMode", "true");
      } else {
        btn.textContent = "ðŸŒ™ Dark Mode";
        localStorage.setItem("darkMode", "false");
      }
    }

    // Load dark mode from localStorage
    if (localStorage.getItem("darkMode") === "true") {
      document.body.classList.add("dark-mode");
      document.getElementById("themeToggle").textContent = "â˜€ï¸ Light Mode";
    }

    // Theme selector
    const themePicker = document.getElementById("theme-picker");
    const savedTheme = localStorage.getItem("selectedTheme") || "default";
    document.body.classList.add(savedTheme + "-theme");
    themePicker.value = savedTheme;

    themePicker.addEventListener("change", function () {
      document.body.classList.remove(...document.body.classList);
      document.body.classList.add(this.value + "-theme");
      localStorage.setItem("selectedTheme", this.value);
    });

    // Streak logic
    const streakDisplay = document.getElementById("streak-count");
    function getToday() {
      return new Date().toLocaleDateString();
    }

    function updateStreak() {
      const last = localStorage.getItem("lastJournalDate");
      const streak = parseInt(localStorage.getItem("journalStreak")) || 0;
      const today = getToday();
      const yesterday = new Date();
      yesterday.setDate(yesterday.getDate() - 1);
      const yestStr = yesterday.toLocaleDateString();

      if (last === today) {
        streakDisplay.textContent = `ðŸ”¥ ${streak} day streak`;
      } else if (last === yestStr) {
        localStorage.setItem("journalStreak", streak + 1);
        localStorage.setItem("lastJournalDate", today);
        streakDisplay.textContent = `ðŸ”¥ ${streak + 1} day streak`;
      } else {
        localStorage.setItem("journalStreak", 1);
        localStorage.setItem("lastJournalDate", today);
        streakDisplay.textContent = `ðŸ”¥ 1 day streak`;
      }
    }

    document.getElementById("save-entry").addEventListener("click", () => {
      const entry = document.getElementById("journal-entry").value.trim();
      if (entry) {
        localStorage.setItem("journal_" + getToday(), entry);
        updateStreak();
      }
    });

    updateStreak();
  </script>
</body>
</html>
